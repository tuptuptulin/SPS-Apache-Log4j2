FROM eclipse-temurin:8-jdk

RUN apt-get update && apt-get install -y python3 && rm -rf /var/lib/apt/lists/*

WORKDIR /app
COPY exploits/Exploit.java /app/payloads/Exploit_info.java
COPY exploits/ExploitShell.java /app/payloads/Exploit_shell.java
COPY attacker-server/http_server.py .

RUN cd /app/payloads && cp Exploit_info.java Exploit.java && javac Exploit.java && rm Exploit.java

EXPOSE 8888
CMD ["python3", "http_server.py", "8888", "/app/payloads"]